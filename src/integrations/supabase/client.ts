
// This file is automatically generated. Do not edit it directly.
import { createClient } from '@supabase/supabase-js';
import type { Database } from './types';

const SUPABASE_URL = "https://bgnngzkkpeifzayrjvbz.supabase.co";
const SUPABASE_PUBLISHABLE_KEY = "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImJnbm5nemtrcGVpZnpheXJqdmJ6Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NDMzNDQ5ODcsImV4cCI6MjA1ODkyMDk4N30.5JDoF8xK3e1fLv14TUZ4tTrbE4llP_6fqtg0PY-dYlw";

// Import the supabase client like this:
// import { supabase } from "@/integrations/supabase/client";

export const supabase = createClient<Database>(SUPABASE_URL, SUPABASE_PUBLISHABLE_KEY);

// Export the client with a different name for legacy code
export const customSupabase = supabase;

// Type definitions
export type Json = Database['public']['Tables']['page_content']['Row']['content'];

// Base DB types from Supabase
export type Partner = Database['public']['Tables']['partners']['Row'];
export type Event = Database['public']['Tables']['events']['Row'];
export type Ticket = Database['public']['Tables']['tickets']['Row'];
export type ScheduleDay = Database['public']['Tables']['schedule_days']['Row'];
export type ScheduleEvent = Database['public']['Tables']['schedule_events']['Row'];
export type PageContent = Database['public']['Tables']['page_content']['Row'];

// Extended types used in the application
export interface ExtendedEvent extends Event {
  title?: string;
  date?: string;
  time?: string;
  image?: string;
  past?: boolean;
  registrationLink?: string;
}

export interface ExtendedScheduleDay extends ScheduleDay {
  events?: ScheduleEvent[];
}

export interface ExtendedPartner extends Partial<Partner> {
  id: string;
  name: string;
  logo_url: string;
  website_url?: string | null;
  order_number: number;
  active: boolean;
  category?: string | null;
}

// Utility functions
export const safeDataAccess = <T>(value: any, defaultValue: T): T => {
  return value !== null && value !== undefined ? value : defaultValue;
};

// File upload utility
export const uploadFileToSupabase = async (
  file: File,
  bucketName: string,
  filePath: string
): Promise<string | null> => {
  try {
    const { data, error } = await supabase.storage
      .from(bucketName)
      .upload(filePath, file, {
        cacheControl: '3600',
        upsert: true,
      });

    if (error) {
      console.error('Error uploading file:', error);
      return null;
    }

    const { data: urlData } = supabase.storage
      .from(bucketName)
      .getPublicUrl(data?.path || filePath);

    return urlData.publicUrl;
  } catch (error) {
    console.error('Error in uploadFileToSupabase:', error);
    return null;
  }
};
